<% 
features = [
  { en: "POST", jp: "投稿がカンタン", text: "写真と場所情報で、遊び場・レビューを気軽に投稿・共有。", color: "#4facfe" },
  { en: "SEARCH", jp: "検索が便利", text: "エリアや設備、評価でフィルタリング。ほしい情報にすぐアクセス。", color: "#00f2fe" },
  { en: "COMMUNITY", jp: "ユーザー交流", text: "コメントや「いいね」で、ママ・パパ友と情報交換。", color: "#28a745" }
] 
%>

<section class="hero-slider-minimal">
  <div class="swiper hero-swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide hero-slide" style="background-image: url(<%= asset_path 'hero_images/hero1.jpg' %>);"></div>
      <div class="swiper-slide hero-slide" style="background-image: url(<%= asset_path 'hero_images/hero2.jpg' %>);"></div>
      <div class="swiper-slide hero-slide" style="background-image: url(<%= asset_path 'hero_images/hero3.jpg' %>);"></div>
    </div>
  </div>
  <div class="hero-content-center">
    <div class="hero-inner text-center" data-aos="fade-up">
      <p class="hero-sub-title">SHARE YOUR FAVORITE PLACES</p>
      <h1 class="hero-main-title">PlayMap</h1>
      <p class="hero-lead">子どもたちの遊び場・イベントを<br class="d-md-none">みんなで共有しよう</p>
      
      <div class="hero-actions mt-5">
        <%= link_to new_post_path, class: "upvege-btn" do %>
          <span>POST <i class="fas fa-arrow-right ml-2"></i></span>
        <% end %>
      </div>
    </div>
  </div>
  <div class="scroll-line"></div>
</section>

<div class="bg-white">
  <main class="container py-custom">
    
    <section class="mb-section">
      <div class="text-center mb-5" data-aos="fade-up">
        <span class="en-title">FEATURES</span>
        <h2 class="jp-title">PlayMapの特徴</h2>
      </div>
      
      <div class="row">
        <% features.each_with_index do |f, i| %>
          <div class="col-md-4 mb-5" data-aos="fade-up" data-aos-delay="<%= i * 100 %>">
            <div class="minimal-feature-box">
              <span class="feature-num">0<%= i + 1 %></span>
              <h3 class="font-weight-bold mt-3"><%= f[:jp] %></h3>
              <p class="text-secondary mt-3"><%= f[:text] %></p>
            </div>
          </div>
        <% end %>
      </div>
    </section>

    <section class="mb-section">
      <div class="d-flex justify-content-between align-items-end mb-4" data-aos="fade-up">
        <div>
          <span class="en-title">LATEST POSTS</span>
          <h2 class="jp-title text-left">最新の投稿</h2>
        </div>
        <%= link_to "VIEW ALL", posts_path, class: "view-all-link d-none d-md-block" %>
      </div>

      <div class="row">
        <% @posts.limit(3).each do |post| %>
          <div class="col-md-4 mb-4" data-aos="fade-up">
            <div class="upvege-card">
              <div class="img-zoom-box">
                <%= display_image_or_default(post.image, classes: "upvege-img") %>
              </div>
              <div class="card-content pt-3">
                <p class="card-date"><%= post.created_at.strftime("%Y.%m.%d") %></p>
                <h4 class="card-title-min"><%= post.title %></h4>
                <%= link_to "Read More", post_path(post), class: "read-more-link" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </section>

    <section class="mb-section">
      <div class="d-flex justify-content-between align-items-end mb-4" data-aos="fade-up">
        <div>
          <span class="en-title">REVIEWS</span>
          <h2 class="jp-title text-left">最新のレビュー</h2>
        </div>
      </div>

      <div class="row">
        <% @reviews.limit(3).each do |review| %>
          <div class="col-md-4 mb-4" data-aos="fade-up">
            <div class="upvege-card review-style">
              <div class="img-zoom-box">
                <%= display_image_or_default(review.image, classes: "upvege-img") %>
              </div>
              <div class="card-content pt-3">
                <div class="star-rating mb-2"><%= render 'public/reviews/display', review: review %></div>
                <h4 class="card-title-min"><%= truncate(review.body, length: 25) %></h4>
                <p class="card-user text-muted small"><i class="fas fa-user-circle"></i> <%= review.user&.name %></p>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </section>

  </main>
</div>